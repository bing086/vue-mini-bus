(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["bus"]=e(require("vue")):t["bus"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({8875:function(t,e,n){var r,o,i;(function(n,u){o=[],r=u,i="function"===typeof r?r.apply(e,o):r,void 0===i||(t.exports=i)})("undefined"!==typeof self&&self,(function(){function t(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(p){var t,e,n,r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,o=/@([^@]*):(\d+):(\d+)\s*$/gi,i=r.exec(p.stack)||o.exec(p.stack),u=i&&i[1]||!1,c=i&&i[2]||!1,s=document.location.href.replace(document.location.hash,""),a=document.getElementsByTagName("script");u===s&&(t=document.documentElement.outerHTML,e=new RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),n=t.replace(e,"$1").trim());for(var f=0;f<a.length;f++){if("interactive"===a[f].readyState)return a[f];if(a[f].src===u)return a[f];if(u===s&&a[f].innerHTML&&a[f].innerHTML.trim()===n)return a[f]}return null}}return t}))},"8bbf":function(e,n){e.exports=t},fb15:function(t,e,n){"use strict";if(n.r(e),"undefined"!==typeof window){var r=window.document.currentScript,o=n("8875");r=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var i=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}var u=n("8bbf"),c=n.n(u),s=class{constructor(t){this.data=t,this.vueInstance=new c.a({data:{data:t}})}get(t,e=null){const{data:n,attr:r}=this.getDataByDot(t);return n&&r in n?n[r]:(this.set({[t]:e}),this.get(t,e))}set(t){Object.entries(t).forEach(([t,e])=>{const{data:n,attr:r}=this.getDataByDot(t);n&&this.vueInstance.$set(n,r,e)})}watch(t,...e){this.vueInstance.$watch("data."+t,...e)}emit(...t){this.vueInstance.$emit(...t)}on(...t){this.vueInstance.$on(...t)}once(...t){this.vueInstance.$once(...t)}off(...t){this.vueInstance.$off(...t)}getDataByDot(t){const e=t.split("."),n=e.pop();let r=this.data;return e.forEach(t=>r&&(r=r[t])),{data:r,attr:n}}};function a(t){if(t._miniBusInstance)return t._miniBusInstance;let e=t;while(e){if(e.miniBusInstance)return t._miniBusInstance=e.miniBusInstance,e.miniBusInstance;e=e.$parent}return t?console.error(t.$options.name+" 不包含minibus实例"):console.error("context 不存在"),f()}function f(...t){return{miniBusInstance:new s(...t)}}function p(...t){return a(this).get(...t)}function d(...t){return a(this).set(...t)}function l(...t){return a(this).watch(...t)}function m(...t){return a(this).emit(...t)}function h(...t){return a(this).on(...t)}function y(...t){return a(this).once(...t)}function b(...t){return a(this).off(...t)}function $(t,e,n=!1){const r=[].concat(e),o=[];let i=t.$parent;while(i){if(r.includes(i.$options.name)&&(o.push(i),!n))break;i=i.$parent}return o}function v(t,e,n=!1){const r=[].concat(e);return t.$children.reduce((t,o)=>r.includes(o.$options.name)&&(t.push(o),!n)?t:t.concat(v(o,e,n)),[])}var g={install:t=>{t.prototype.$b_init=f,t.prototype.$b_get=p,t.prototype.$b_set=d,t.prototype.$b_watch=l,t.prototype.$b_emit=m,t.prototype.$b_on=h,t.prototype.$b_once=y,t.prototype.$b_off=b,t.prototype.$findParentComponents=$,t.prototype.$findChildComponents=v}};e["default"]=g}})}));
//# sourceMappingURL=bus.umd.min.js.map